trigger:
- master

pool:
  vmImage: 'win1803'

container:
  image: 'fmcclean/anaconda-windows:weather-reporter'
  endpoint: 'Docker Registry'

steps:

- script: python -m unittest tests/test_layout.py
  displayName: 'run test_layout.py'

- task: PublishPipelineArtifact@1
  inputs:
    targetPath: 'tests/outputs/temp_out.pdf'
    artifactName: 'temp_out.pdf'

- script: python -m PyInstaller -y build.spec
  displayName: 'Build exe'

- task: PublishPipelineArtifact@1
  inputs:
    targetPath: 'dist'
    artifactName: 'build.exe'
